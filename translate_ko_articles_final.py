#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æœ€ç»ˆç‰ˆæ‰¹é‡ç¿»è¯‘ä¼˜åŒ–è„šæœ¬
å½»åº•è§£å†³æ‰€æœ‰ç¿»è¯‘è´¨é‡é—®é¢˜
"""

import os
import re
from pathlib import Path

def get_final_translation_dict():
    """è·å–æœ€ç»ˆå®Œæ•´çš„ç¿»è¯‘å­—å…¸"""
    return {
        # è¯­è¨€æ ‡ç­¾
        'lang="zh-CN"': 'lang="ko"',
        'lang="en"': 'lang="ko"',
        
        # HTMLæ³¨é‡Šç¿»è¯‘ - æ›´å…¨é¢çš„åŒ¹é…
        '<!-- è¿”å›æŒ‰é’® -->': '<!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->',
        '<!-- è‹±é›„å›¾ç‰‡ -->': '<!-- íˆì–´ë¡œ ì´ë¯¸ì§€ -->',
        '<!-- ä¸»è¦å†…å®¹ -->': '<!-- ì£¼ìš” ë‚´ìš© -->',
        '<!-- è¿›åº¦æ¡ -->': '<!-- ì§„í–‰ë¥  í‘œì‹œì¤„ -->',
        '<!-- æ–‡ç« ä¿¡æ¯ -->': '<!-- ë¬¸ì„œ ì •ë³´ -->',
        '<!-- å¼•ç”¨æ¡† -->': '<!-- ì¸ìš©êµ¬ -->',
        '<!-- æ–‡ç« æ­£æ–‡ -->': '<!-- ë¬¸ì„œ ë³¸ë¬¸ -->',
        '<!-- å¯¼èˆªæ  -->': '<!-- ë‚´ë¹„ê²Œì´ì…˜ ë°” -->',
        '<!-- ä¾§è¾¹æ  -->': '<!-- ì‚¬ì´ë“œë°” -->',
        '<!-- é¡µè„š -->': '<!-- í‘¸í„° -->',
        '<!-- å¤´éƒ¨ -->': '<!-- í—¤ë” -->',
        '<!-- å†…å®¹åŒºåŸŸ -->': '<!-- ì½˜í…ì¸  ì˜ì—­ -->',
        '<!-- å›¾ç‰‡è½®æ’­ -->': '<!-- ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë” -->',
        '<!-- å¡ç‰‡å®¹å™¨ -->': '<!-- ì¹´ë“œ ì»¨í…Œì´ë„ˆ -->',
        
        # JavaScriptæ³¨é‡Šç¿»è¯‘ - æ›´å…¨é¢çš„åŒ¹é…
        '// æ›´æ–°æ—¶é—´': '// ì‹œê°„ ì—…ë°ì´íŠ¸',
        '// æ¨¡æ‹Ÿé˜…è¯»è¿›åº¦': '// ì½ê¸° ì§„í–‰ë¥  ì‹œë®¬ë ˆì´ì…˜',
        '// åˆå§‹åŒ–': '// ì´ˆê¸°í™”',
        '// äº‹ä»¶ç›‘å¬': '// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ',
        '// æ•°æ®å¤„ç†': '// ë°ì´í„° ì²˜ë¦¬',
        '// é¡µé¢åŠ è½½': '// í˜ì´ì§€ ë¡œë“œ',
        '// åŠ¨ç”»æ•ˆæœ': '// ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼',
        '// ç”¨æˆ·äº¤äº’': '// ì‚¬ìš©ì ìƒí˜¸ì‘ìš©',
        
        # è‹±æ–‡æ ‡é¢˜ç¿»è¯‘ - å¸¸è§çš„è‹±æ–‡æ ‡é¢˜
        'Getting Started': 'ì‹œì‘í•˜ê¸°',
        'Essential Equipment': 'í•„ìˆ˜ ì¥ë¹„',
        'Identification Techniques': 'ì‹ë³„ ê¸°ë²•',
        'Best Locations': 'ìµœê³ ì˜ ì¥ì†Œ',
        'Seasonal Guide': 'ê³„ì ˆ ê°€ì´ë“œ',
        'Photography Tips': 'ì‚¬ì§„ ì´¬ì˜ íŒ',
        'Behavior Observation': 'í–‰ë™ ê´€ì°°',
        'Ethics and Conservation': 'ìœ¤ë¦¬ì™€ ë³´í˜¸',
        'Citizen Science': 'ì‹œë¯¼ ê³¼í•™',
        'Advanced Techniques': 'ê³ ê¸‰ ê¸°ë²•',
        'Journal Keeping': 'ì¼ì§€ ê¸°ë¡',
        'Song Identification': 'ì†Œë¦¬ ì‹ë³„',
        
        'Bird Watching for Beginners': 'ì´ˆë³´ìë¥¼ ìœ„í•œ ì¡°ë¥˜ ê´€ì°°',
        'Choosing the Right Bird': 'ì í•©í•œ ì¡°ë¥˜ ì„ íƒ',
        'Nutrition and Feeding': 'ì˜ì–‘ê³¼ ê¸‰ì´',
        'Housing and Environment': 'ì£¼ê±°ì™€ í™˜ê²½',
        'Health and Veterinary Care': 'ê±´ê°•ê³¼ ìˆ˜ì˜í•™ì  ê´€ë¦¬',
        'Training and Behavior': 'í›ˆë ¨ê³¼ í–‰ë™',
        'Breeding and Reproduction': 'ë²ˆì‹ê³¼ ìƒì‹',
        'Emergency First Aid': 'ì‘ê¸‰ ì²˜ì¹˜',
        'Seasonal Care': 'ê³„ì ˆë³„ ê´€ë¦¬',
        'Enrichment Activities': 'í’ë¶€í™” í™œë™',
        'Senior Bird Care': 'ë…¸ë ¹ ì¡°ë¥˜ ê´€ë¦¬',
        'Species Profiles': 'ì¢… í”„ë¡œí•„',
        
        'Bird Flight Mechanics': 'ì¡°ë¥˜ ë¹„í–‰ ì—­í•™',
        'Magnetic Navigation': 'ìê¸° í•­ë²•',
        'Hummingbird Mechanics': 'ë²Œìƒˆ ì—­í•™',
        'Bird Intelligence': 'ì¡°ë¥˜ ì§€ëŠ¥',
        'Feather Structure': 'ê¹ƒí„¸ êµ¬ì¡°',
        'Bird Vision': 'ì¡°ë¥˜ ì‹œê°',
        'Egg Development': 'ì•Œ ë°œë‹¬',
        'Bird Communication': 'ì¡°ë¥˜ ì˜ì‚¬ì†Œí†µ',
        'Migration Physiology': 'ì´ë™ ìƒë¦¬í•™',
        'Biomechanics': 'ìƒì²´ì—­í•™',
        
        'Habitat and Ecosystems': 'ì„œì‹ì§€ì™€ ìƒíƒœê³„',
        'Food Webs and Chains': 'ë¨¹ì´ë§ê³¼ ë¨¹ì´ì‚¬ìŠ¬',
        'Migration Patterns': 'ì´ë™ íŒ¨í„´',
        'Breeding Ecology': 'ë²ˆì‹ ìƒíƒœí•™',
        'Climate Change Impact': 'ê¸°í›„ ë³€í™” ì˜í–¥',
        'Urban Ecology': 'ë„ì‹œ ìƒíƒœí•™',
        'Conservation Biology': 'ë³´ì „ ìƒë¬¼í•™',
        'Island Biogeography': 'ì„¬ ìƒë¬¼ì§€ë¦¬í•™',
        'Pollination and Seed Dispersal': 'ìˆ˜ë¶„ê³¼ ì¢…ì ì‚°í¬',
        'Community Dynamics': 'êµ°ì§‘ ì—­í•™',
        
        # å¸¸è§è‹±æ–‡çŸ­è¯­
        'Overview': 'ê°œìš”',
        'Introduction': 'ì†Œê°œ',
        'Key Points': 'í•µì‹¬ í¬ì¸íŠ¸',
        'Important Notes': 'ì¤‘ìš” ì‚¬í•­',
        'Tips and Tricks': 'íŒê³¼ ìš”ë ¹',
        'Common Mistakes': 'ì¼ë°˜ì ì¸ ì‹¤ìˆ˜',
        'Best Practices': 'ëª¨ë²” ì‚¬ë¡€',
        'Quick Reference': 'ë¹ ë¥¸ ì°¸ì¡°',
        'Step by Step': 'ë‹¨ê³„ë³„',
        'Frequently Asked Questions': 'ìì£¼ ë¬»ëŠ” ì§ˆë¬¸',
        'Resources': 'ìë£Œ',
        'Further Reading': 'ì¶”ê°€ ì½ê¸°',
        'Related Topics': 'ê´€ë ¨ ì£¼ì œ',
        'Summary': 'ìš”ì•½',
        'Conclusion': 'ê²°ë¡ ',
        
        # é¡µé¢æ ‡é¢˜å’Œä¸»è¦å†…å®¹
        "è§‚é¸Ÿå…¥é—¨æŒ‡å—": "ì¡°ë¥˜ ê´€ì°° ì…ë¬¸ ê°€ì´ë“œ",
        "è§‚é¸Ÿå¿…å¤‡è£…å¤‡": "ì¡°ë¥˜ ê´€ì°° í•„ìˆ˜ ì¥ë¹„",
        "é¸Ÿç±»è¯†åˆ«æŠ€å·§": "ì¡°ë¥˜ ì‹ë³„ ê¸°ë²•",
        "æœ€ä½³è§‚é¸Ÿåœ°ç‚¹": "ìµœê³ ì˜ ì¡°ë¥˜ ê´€ì°° ì¥ì†Œ",
        "å­£èŠ‚æ€§è§‚é¸ŸæŒ‡å—": "ê³„ì ˆë³„ ì¡°ë¥˜ ê´€ì°° ê°€ì´ë“œ",
        "è§‚é¸Ÿæ‘„å½±æŠ€å·§": "ì¡°ë¥˜ ê´€ì°° ì‚¬ì§„ ì´¬ì˜ ê¸°ë²•",
        "é¸Ÿç±»è¡Œä¸ºè§‚å¯Ÿ": "ì¡°ë¥˜ í–‰ë™ ê´€ì°°",
        "è§‚é¸Ÿä¼¦ç†ä¸ä¿æŠ¤": "ì¡°ë¥˜ ê´€ì°° ìœ¤ë¦¬ì™€ ë³´í˜¸",
        "å…¬æ°‘ç§‘å­¦é¡¹ç›®": "ì‹œë¯¼ ê³¼í•™ í”„ë¡œì íŠ¸",
        "é«˜çº§è§‚é¸ŸæŠ€å·§": "ê³ ê¸‰ ì¡°ë¥˜ ê´€ì°° ê¸°ë²•",
        "è§‚é¸Ÿæ—¥å¿—è®°å½•": "ì¡°ë¥˜ ê´€ì°° ì¼ì§€ ê¸°ë¡",
        "å£°éŸ³è¯†åˆ«": "ì†Œë¦¬ ì‹ë³„",
        
        # ç”Ÿæ€å­¦ç›¸å…³
        "æ –æ¯åœ°ä¸ç”Ÿæ€ç³»ç»Ÿ": "ì„œì‹ì§€ì™€ ìƒíƒœê³„",
        "é£Ÿç‰©ç½‘ä¸é£Ÿç‰©é“¾": "ë¨¹ì´ë§ê³¼ ë¨¹ì´ì‚¬ìŠ¬",
        "è¿å¾™æ¨¡å¼": "ì´ë™ íŒ¨í„´",
        "ç¹æ®–ç”Ÿæ€å­¦": "ë²ˆì‹ ìƒíƒœí•™",
        "æ°”å€™å˜åŒ–å½±å“": "ê¸°í›„ ë³€í™” ì˜í–¥",
        "åŸå¸‚ç”Ÿæ€å­¦": "ë„ì‹œ ìƒíƒœí•™",
        "ä¿æŠ¤ç”Ÿç‰©å­¦": "ë³´ì „ ìƒë¬¼í•™",
        "å²›å±¿ç”Ÿç‰©åœ°ç†å­¦": "ì„¬ ìƒë¬¼ì§€ë¦¬í•™",
        "ä¼ ç²‰ä¸ç§å­ä¼ æ’­": "ìˆ˜ë¶„ê³¼ ì¢…ì ì‚°í¬",
        "ç¾¤è½åŠ¨æ€": "êµ°ì§‘ ì—­í•™",
        
        # å® ç‰©æŠ¤ç†ç›¸å…³
        "é€‰æ‹©åˆé€‚çš„é¸Ÿç±»": "ì í•©í•œ ì¡°ë¥˜ ì„ íƒ",
        "è¥å…»ä¸å–‚å…»": "ì˜ì–‘ê³¼ ê¸‰ì´",
        "ä½æˆ¿ä¸ç¯å¢ƒ": "ì£¼ê±°ì™€ í™˜ê²½",
        "å¥åº·ä¸å…½åŒ»æŠ¤ç†": "ê±´ê°•ê³¼ ìˆ˜ì˜í•™ì  ê´€ë¦¬",
        "è®­ç»ƒä¸è¡Œä¸º": "í›ˆë ¨ê³¼ í–‰ë™",
        "ç¹æ®–ä¸ç¹æ®–": "ë²ˆì‹ê³¼ ìƒì‹",
        "ç´§æ€¥æ•‘æŠ¤": "ì‘ê¸‰ ì²˜ì¹˜",
        "å­£èŠ‚æ€§æŠ¤ç†": "ê³„ì ˆë³„ ê´€ë¦¬",
        "ä¸°å¯Œæ´»åŠ¨": "í’ë¶€í™” í™œë™",
        "è€å¹´é¸Ÿç±»æŠ¤ç†": "ë…¸ë ¹ ì¡°ë¥˜ ê´€ë¦¬",
        "ç‰©ç§æ¡£æ¡ˆ": "ì¢… í”„ë¡œí•„",
        
        # ç§‘å­¦å¥‡è§‚ç›¸å…³
        "é¸Ÿç±»é£è¡ŒåŠ›å­¦": "ì¡°ë¥˜ ë¹„í–‰ ì—­í•™",
        "ç£å¯¼èˆª": "ìê¸° í•­ë²•",
        "èœ‚é¸ŸåŠ›å­¦": "ë²Œìƒˆ ì—­í•™",
        "é¸Ÿç±»æ™ºèƒ½": "ì¡°ë¥˜ ì§€ëŠ¥",
        "ç¾½æ¯›ç»“æ„": "ê¹ƒí„¸ êµ¬ì¡°",
        "é¸Ÿç±»è§†è§‰": "ì¡°ë¥˜ ì‹œê°",
        "åµå‘è‚²": "ì•Œ ë°œë‹¬",
        "é¸Ÿç±»äº¤æµ": "ì¡°ë¥˜ ì˜ì‚¬ì†Œí†µ",
        "è¿å¾™ç”Ÿç†å­¦": "ì´ë™ ìƒë¦¬í•™",
        "ç”Ÿç‰©åŠ›å­¦": "ìƒì²´ì—­í•™",
        
        # åŸºæœ¬è¯æ±‡
        "è§‚é¸Ÿ": "ì¡°ë¥˜ ê´€ì°°",
        "é¸Ÿç±»": "ì¡°ë¥˜",
        "ç”Ÿæ€": "ìƒíƒœ",
        "ç¯å¢ƒ": "í™˜ê²½",
        "ä¿æŠ¤": "ë³´í˜¸",
        "è‡ªç„¶": "ìì—°",
        "é‡ç”ŸåŠ¨ç‰©": "ì•¼ìƒë™ë¬¼",
        "æ –æ¯åœ°": "ì„œì‹ì§€",
        "è¿å¾™": "ì´ë™",
        "ç¹æ®–": "ë²ˆì‹",
        "è¡Œä¸º": "í–‰ë™",
        "è¯†åˆ«": "ì‹ë³„",
        "è§‚å¯Ÿ": "ê´€ì°°",
        "æ‘„å½±": "ì‚¬ì§„ ì´¬ì˜",
        "è£…å¤‡": "ì¥ë¹„",
        "æŠ€å·§": "ê¸°ë²•",
        "æŒ‡å—": "ê°€ì´ë“œ",
        "å…¥é—¨": "ì…ë¬¸",
        "åˆå­¦è€…": "ì´ˆë³´ì",
        "ä¸“å®¶": "ì „ë¬¸ê°€",
        "å»ºè®®": "ì œì•ˆ",
        "æç¤º": "íŒ",
        "æ–¹æ³•": "ë°©ë²•",
        "æ­¥éª¤": "ë‹¨ê³„",
        "ç»éªŒ": "ê²½í—˜",
        "å­¦ä¹ ": "í•™ìŠµ",
        "ç»ƒä¹ ": "ì—°ìŠµ",
        "æŠ€èƒ½": "ê¸°ìˆ ",
        "çŸ¥è¯†": "ì§€ì‹",
        "ä¿¡æ¯": "ì •ë³´",
        "èµ„æº": "ìì›",
        "å·¥å…·": "ë„êµ¬",
        "åº”ç”¨": "ì•±",
        "ç½‘ç«™": "ì›¹ì‚¬ì´íŠ¸",
        "ç¤¾åŒº": "ì»¤ë®¤ë‹ˆí‹°",
        "ç»„ç»‡": "ë‹¨ì²´",
        "é¡¹ç›®": "í”„ë¡œì íŠ¸",
        "ç ”ç©¶": "ì—°êµ¬",
        "ç§‘å­¦": "ê³¼í•™",
        "æ•°æ®": "ë°ì´í„°",
        "è®°å½•": "ê¸°ë¡",
        "æ—¥å¿—": "ì¼ì§€"
    }

def translate_file_final(file_path):
    """æœ€ç»ˆç‰ˆç¿»è¯‘å•ä¸ªHTMLæ–‡ä»¶"""
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            content = f.read()
        
        # è·å–ç¿»è¯‘å­—å…¸
        translations = get_final_translation_dict()
        
        # æŒ‰é•¿åº¦æ’åºï¼Œä¼˜å…ˆæ›¿æ¢é•¿çš„çŸ­è¯­
        sorted_translations = sorted(translations.items(), key=lambda x: len(x[0]), reverse=True)
        
        # æ‰§è¡Œç¿»è¯‘
        for chinese, korean in sorted_translations:
            content = content.replace(chinese, korean)
        
        # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç†å‰©ä½™çš„ä¸­æ–‡æ³¨é‡Š
        content = re.sub(r'<!--([^>]*[\u4e00-\u9fff][^>]*)-->', 
                        lambda m: f'<!-- {translate_chinese_text(m.group(1).strip())} -->', 
                        content)
        
        # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç†å‰©ä½™çš„ä¸­æ–‡JSæ³¨é‡Š
        content = re.sub(r'//([^\n]*[\u4e00-\u9fff][^\n]*)', 
                        lambda m: f'// {translate_chinese_text(m.group(1).strip())}', 
                        content)
        
        # å†™å›æ–‡ä»¶
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(content)
        
        print(f"âœ… æœ€ç»ˆç¿»è¯‘å®Œæˆ: {file_path}")
        return True
        
    except Exception as e:
        print(f"âŒ ç¿»è¯‘å¤±è´¥: {file_path} - {str(e)}")
        return False

def translate_chinese_text(text):
    """ç¿»è¯‘ä¸­æ–‡æ–‡æœ¬ä¸ºéŸ©è¯­"""
    simple_translations = {
        "è¿”å›æŒ‰é’®": "ë’¤ë¡œê°€ê¸° ë²„íŠ¼",
        "è‹±é›„å›¾ç‰‡": "íˆì–´ë¡œ ì´ë¯¸ì§€", 
        "ä¸»è¦å†…å®¹": "ì£¼ìš” ë‚´ìš©",
        "è¿›åº¦æ¡": "ì§„í–‰ë¥  í‘œì‹œì¤„",
        "æ›´æ–°æ—¶é—´": "ì‹œê°„ ì—…ë°ì´íŠ¸",
        "æ¨¡æ‹Ÿé˜…è¯»è¿›åº¦": "ì½ê¸° ì§„í–‰ë¥  ì‹œë®¬ë ˆì´ì…˜",
        "åˆå§‹åŒ–": "ì´ˆê¸°í™”",
        "å¯¼èˆªæ ": "ë‚´ë¹„ê²Œì´ì…˜ ë°”",
        "ä¾§è¾¹æ ": "ì‚¬ì´ë“œë°”",
        "é¡µè„š": "í‘¸í„°",
        "å¤´éƒ¨": "í—¤ë”",
        "å†…å®¹åŒºåŸŸ": "ì½˜í…ì¸  ì˜ì—­",
        "å›¾ç‰‡è½®æ’­": "ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë”",
        "å¡ç‰‡å®¹å™¨": "ì¹´ë“œ ì»¨í…Œì´ë„ˆ",
        "äº‹ä»¶ç›‘å¬": "ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ",
        "æ•°æ®å¤„ç†": "ë°ì´í„° ì²˜ë¦¬",
        "é¡µé¢åŠ è½½": "í˜ì´ì§€ ë¡œë“œ",
        "åŠ¨ç”»æ•ˆæœ": "ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼",
        "ç”¨æˆ·äº¤äº’": "ì‚¬ìš©ì ìƒí˜¸ì‘ìš©"
    }
    
    for chinese, korean in simple_translations.items():
        text = text.replace(chinese, korean)
    
    return text

def check_final_quality(file_path):
    """æœ€ç»ˆè´¨é‡æ£€æŸ¥"""
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            content = f.read()
        
        issues = []
        
        # æ£€æŸ¥ä¸­æ–‡æ³¨é‡Š
        chinese_comments = re.findall(r'<!--[^>]*[\u4e00-\u9fff][^>]*-->', content)
        if chinese_comments:
            issues.append(f"ä¸­æ–‡HTMLæ³¨é‡Š: {len(chinese_comments)}ä¸ª")
        
        # æ£€æŸ¥ä¸­æ–‡JavaScriptæ³¨é‡Š
        chinese_js_comments = re.findall(r'//[^\n]*[\u4e00-\u9fff][^\n]*', content)
        if chinese_js_comments:
            issues.append(f"ä¸­æ–‡JSæ³¨é‡Š: {len(chinese_js_comments)}ä¸ª")
        
        # æ£€æŸ¥æœªç¿»è¯‘çš„è‹±æ–‡æ ‡é¢˜
        english_titles = re.findall(r'<h[1-6][^>]*>[^<]*[A-Za-z]{3,}[^<]*</h[1-6]>', content)
        if english_titles:
            issues.append(f"è‹±æ–‡æ ‡é¢˜: {len(english_titles)}ä¸ª")
        
        return issues
        
    except Exception as e:
        return [f"æ£€æŸ¥å¤±è´¥: {str(e)}"]

def main():
    """ä¸»å‡½æ•°"""
    ko_dir = Path("ko")
    
    if not ko_dir.exists():
        print("âŒ koç›®å½•ä¸å­˜åœ¨")
        return
    
    # æŸ¥æ‰¾æ‰€æœ‰HTMLæ–‡ä»¶
    html_files = list(ko_dir.rglob("*.html"))
    
    if not html_files:
        print("âŒ æœªæ‰¾åˆ°HTMLæ–‡ä»¶")
        return
    
    print(f"ğŸ“ æ‰¾åˆ° {len(html_files)} ä¸ªHTMLæ–‡ä»¶")
    print("ğŸ”§ å¼€å§‹æœ€ç»ˆè´¨é‡ä¼˜åŒ–...")
    
    # æœ€ç»ˆç¿»è¯‘å’Œè´¨é‡æ£€æŸ¥
    success_count = 0
    fixed_issues = 0
    
    for file_path in html_files:
        # æ£€æŸ¥å½“å‰è´¨é‡
        issues_before = check_final_quality(file_path)
        
        if issues_before:
            print(f"\nğŸ”§ ä¿®å¤æ–‡ä»¶: {file_path}")
            print(f"   é—®é¢˜: {', '.join(issues_before)}")
            
            # æ‰§è¡Œæœ€ç»ˆç¿»è¯‘
            if translate_file_final(file_path):
                success_count += 1
                fixed_issues += len(issues_before)
                
                # å†æ¬¡æ£€æŸ¥
                issues_after = check_final_quality(file_path)
                if issues_after:
                    print(f"   âš ï¸ å‰©ä½™é—®é¢˜: {', '.join(issues_after)}")
                else:
                    print(f"   âœ… æ‰€æœ‰é—®é¢˜å·²ä¿®å¤")
        else:
            success_count += 1
    
    print(f"\nğŸ‰ æœ€ç»ˆä¼˜åŒ–å®Œæˆï¼")
    print(f"ğŸ“Š å¤„ç†æ–‡ä»¶: {success_count}/{len(html_files)}")
    print(f"ğŸ”§ ä¿®å¤é—®é¢˜: {fixed_issues}ä¸ª")

if __name__ == "__main__":
    main()